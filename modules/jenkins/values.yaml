controller:
  # Jenkins Controller Konfiguration
  image:
    registry: "docker.io"
    repository: "jenkins/jenkins"
    tag: "lts"

  # Service Configuration
  serviceType: LoadBalancer

  # Resource Limits
  resources:
    requests:
      cpu: "500m"
      memory: "1Gi"
    limits:
      cpu: "2000m"
      memory: "4Gi"

  # JVM Options
  javaOpts: "-Xms512m -Xmx2048m"

  # Jenkins Configuration as Code (JCasC)
  JCasC:
    defaultConfig: true
    configScripts:
      welcome-message: |
        jenkins:
          systemMessage: "Jenkins mit Kaniko + Git für CI/CD Pipeline"

  # Installiere notwendige Plugins (ohne Versionen = neueste kompatible Version)
  installPlugins:
    - kubernetes
    - workflow-aggregator
    - git
    - configuration-as-code
    - credentials-binding
    - pipeline-stage-view
    - github
    - workflow-job
    - pipeline-model-definition

  # Admin User
  admin:
    username: "admin"
    password: "admin123"

  # Health-Probes deaktivieren (Jenkins braucht Zeit für Plugin-Installation)
  healthProbes: false

  # Service Account mit Permissions
  serviceAccount:
    create: true
    name: jenkins
    annotations:
      # Optional: IRSA (IAM Roles for Service Accounts) für ECR
      # eks.amazonaws.com/role-arn: "arn:aws:iam::ACCOUNT_ID:role/jenkins-ecr-role"

# Agent (Pod Templates) Konfiguration
agent:
  enabled: true

  # Namespace für Agents
  namespace: "jenkins"

  # Default Pod Template
  podName: "jenkins-agent"

  # Resource Limits für Standard Agent
  resources:
    requests:
      cpu: "500m"
      memory: "512Mi"
    limits:
      cpu: "1000m"
      memory: "1Gi"

# Persistence für Jenkins Home
persistence:
  enabled: true
  storageClass: "gp2-csi"
  accessMode: "ReadWriteOnce"
  size: "10Gi"

# Service Account Permissions
rbac:
  create: true
  readSecrets: true
